# 磁盘的分区和挂载

> 计算机中存放信息的主要的存储设备就是硬盘，但是硬盘不能直接使用，必须对硬盘进行分割，分割成的一块一块的硬盘区域就是磁盘分区。在传统的磁盘管理中，将一个硬盘分为两大类分区：主分区和扩展分区。主分区是能够安装操作系统，能够进行计算机启动的分区，这样的分区可以直接格式化，然后安装系统，直接存放文件。

磁盘分区命令：fdisk

查看当前分区情况：lsblk

磁盘用量命令：df（磁盘占用空间），du（磁盘使用情况）

磁盘分为两种分区：

* MBR：
  * 最多支持四个主分区
  * 系统只能安装在主分区
  * 扩展分区要占一个主分区（在扩展分区中可以划分逻辑分区）
  * MBR最大只支持2TB，但拥有最好的兼容性
* GPT
  * 支持无限多个主分区（但操作系统可能限制，比如 windows下最多128个分区）
  * 最大支持18EB的大容量（1EB=1024 PB，1PB=1024 TB ）
  * windows7 64位以后支持 GPT

分区常用命令：

分区命令：**fdisk /dev/sdb** 开始对/sdb分区

• m 显示命令列表

• p 显示磁盘分区 同 fdisk –l

• n 新增分区

• d 删除分区

• w 写入并退出

说明：开始分区后输入n，新增分区，然后选择p ，分区类型为主分区，两次回车默认，最后输入w写入分区并退出，若不保存退出输入q。

磁盘分区后要进行格式化才能存储数据：

格式化命令： **mkfs -t ext4 /dev/sdb1**
mkfs 格式化 （格式化之后才能存数据）
ext4 分区类型

然后就可以执行挂载了：

mount 文件系统 挂载目录，比如：mount /dev/sdb1 /newdisk，将 /dev/sdb1 挂载到 /newdisk 目录

不需要了可以 umount，mount /dev/sdb1 或 umount /newdisk 都可以

注意：用命令行挂载重启后会失效，可以用通过修改 /etc/fstab 实现永久挂载，添加完成后，执行 **mount –a** 即刻生效

同步目录数据：rsync -aXS oldFold newFold



对磁盘重新分区：

1. 先删除原来分区
2. 使用 fdisk 重新分区