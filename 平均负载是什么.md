# 平均负载是什么

当我们在 Linux 中输入 top 命令：



* PID：进程的 pid

* USER：运行进程的用户名
* PR：进程的优先级
* NI：进程的 nice 值，用于调整优先级
* VIRT：进程占用的虚拟内存大小，单位为 KB/MB
* RES：进程使用的物理内存的大小，单位 KB/MB
* SHR：进程共享的物理内存大小，单位为 KB/MB
* S：进程的状态，包括 R（运行）、S（睡眠）、Z（僵尸）等
* %CPU：进程占用的 CPU 时间百分比
* %MEM：进程占用的物理内存百分比
* TIME+：进程的 CPU 累积时间
* COMMAND：进程的命令



平均负载是指，单位时间内系统中处于可运行状态和不可中断状态的平均进程数，也就是平均活跃进程数。

平均负载和 CPU 使用率没有绝对关系，平均活跃进程数包括正在使用 CPU 的进程，也包括正在等待 CPU 和等待I/O 的进程。而 CPU 的使用率则是单位时间内 CPU 繁忙情况的统计，跟平均负载并不一定完全匹配，如：

* CPU 密集型进程，使用大量 CPU 会导致平均负载升高，这时 CPU 和平均负载是对应的
* I/O 密集型进程，等待 I/O 也会导致平均负载上升，这时 CPU 使用率不一定高
* 大量等待 CPU 的进程调度也会导致平均负载升高，这时 CPU 和平均负载又是对应的了



工具：

mpstat

pidstat